<!DOCTYPE html>
<html>
	<head>
		<script src="./index.bundle.js"></script>
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
		<script type="text/javascript" src="../scripts/LocalStorageInit.js"></script>
		<script type="text/javascript" src="../images/ItemsAndImages.js"></script>
		
		<link rel="stylesheet" type="text/css" href="../styles/nis/nis.css"/>
		<link rel="stylesheet" type="text/css" href="../styles/nis/alt1-currentskin/skinstyle.css"/><!--stylesheet with all nis styles (Will be part of public resources so feel free to copy/paste)-->
		
		<script>
			// Screw it, I don't care if this is cheating,
			// I can't get my init() to work :(
			function refresh(){
				location.reload();
			}

			function init(){
				var keys = Object.keys(lsdb);
    			if(localStorage.getItem("Checked button") == null){ // If doesn't exist yet
    			    console.log("Defaulting button to easy...");
    			    document.getElementById("easy").checked = true;
    			    document.getElementById('clue_tier').textContent = "Easy";
    			    localStorage.setItem("Checked button", "easy");
    			}
    			else{ // If it does, set the button and span
    			    console.log("Setting previously set radio button: " + localStorage.getItem("Checked button") + "...");
    			    var temp = localStorage.getItem("Checked button");
    			    document.getElementById(temp).checked = true;
    			    document.getElementById('clue_tier').textContent = temp[0].toUpperCase() + temp.slice(1).toLowerCase();
    			}
    			console.log("Radio buttons initialized.\n ");

    			//  Initializing the rest of the LocalStorage
    			console.log("Initializing LocalStorage...");
    			for(i=0; i < keys.length; i++)
    			    if(!(localStorage.getItem(keys[i]))) // If doesn't exist, add it
    			        localStorage.setItem(keys[i], JSON.stringify(lsdb[keys[i]]));

    			console.log("LocalStorage initialized.\n ");
			}

			function changeClueTierSpan(id){
			    // Set the clue_tier span for the checked box
			    document.getElementById('clue_tier').textContent = id[0].toUpperCase() + id.slice(1).toLowerCase();
			    localStorage.setItem("Checked button", id);
			}
		</script>

	</head>
	<body class="nis" onload="init()">
		<header>
			<h1 class="title">OpenLogger, an open-source clue logger</h1>
			<div class="header_box">
				<div class="button_box">
					<div class="clue_scrolls_buttons" id="top">
						<h3 class="clue_scrolls_button_header">Select the tier you're opening</h3>
						<div class="clue_scrolls_button_box">
							<div class="clue_button_label_holder" id="clue_easy">
								<label for="easy" id="clue_scroll_level_label" onclick="changeClueTierSpan('easy');">Easy</label>
								<input type="radio" id="easy" name="clue_scroll_level" class="clue_scroll_level" value="easy" onclick="changeClueTierSpan('easy');">
							</div>
							<div class="clue_button_label_holder" id="clue_medium">
								<label for="medium" id="clue_scroll_level_label" onclick="changeClueTierSpan('medium');">Medium</label>
								<input type="radio" id="medium" name="clue_scroll_level" class="clue_scroll_level" value="medium" onclick="changeClueTierSpan('medium');">
							</div>
							<div class="clue_button_label_holder" id="clue_hard">
								<label for="hard" id="clue_scroll_level_label" onclick="changeClueTierSpan('hard');">Hard</label>
								<input type="radio" id="hard" name="clue_scroll_level" class="clue_scroll_level" value="hard" onclick="changeClueTierSpan('hard');">
							</div>
							<div class="clue_button_label_holder" id="clue_elite">
								<label for="elite" id="clue_scroll_level_label" onclick="changeClueTierSpan('elite');">Elite</label>
								<input type="radio" id="elite" name="clue_scroll_level" class="clue_scroll_level" value="elite" onclick="changeClueTierSpan('elite');">
							</div>
							<div class="clue_button_label_holder" id="clue_master">
								<label for="master" id="clue_scroll_level_label" onclick="changeClueTierSpan('master');">Master</label>
								<input type="radio" id="master" name="clue_scroll_level" class="clue_scroll_level" value="master" onclick="changeClueTierSpan('master');">
							</div>
						</div>
					</div>
					<div class="main_buttons" id="top">
						<div id="csv_button" class="nisbutton" onclick="refresh();"><!--exporttocsv()--><strike>Export to CSV</strike></div>
						<div id="clear_button" class="nisbutton" onclick="cleardb();"><strike>Clear Database</strike></div>
						<div id="docapturebutton" class="nisbutton" onclick="firstFunction();"><!--docapture()-->Capture Rewards</div>
					</div>
				</div>
				<div class="value_box">
					<div class="capture_info" id="top">
						<div class="capture_box_elements" id="math_box_count">
							<span id="clue_tier">Easy</span> clues logged: <span id="number_of_clues">10000</span>
						</div>
						<div class="capture_box_elements" id="math_box_total">
							<u>Total value of logged clues</u>
							<div><span id="value_of_clues">0</span></div>
						</div>
						<div class="capture_box_elements" id="math_box_average">
							<u>Average value of logged clues</u>
							<div><span id="average_of_clues">0</span></div>
						</div>
					</div>
					<div class="captured_rewards" id="top">
						<div id="captured_rewards_title">
							Rewards Capture Value: <span id="rewards_value">0,000,000,000</span>
						</div>
						<div id="captured_rewards_grid">
							<div id="first_item" class="rewards"></div>
							<div id="second_item" class="rewards"></div>
							<div id="third_item" class="rewards"></div>
							<div id="fourth_item" class="rewards"></div>
							<div id="fifth_item" class="rewards"></div>
							<div id="sixth_item" class="rewards"></div>
							<div id="seventh_item" class="rewards"></div>
							<div id="eigth_item" class="rewards"></div>
							<div id="ninth_item" class="rewards"></div>
						</div>
						<div id="self_button" class="nisbutton" onclick="refresh();"><strike>Self Insert into DB</strike></div>	
					</div>
				</div>
			</div>
		</header>
		<mainsection>
			<!-- Consider making the tabs toggleable to hide them 
					- Create assets for the tabs for on hover and onclick
					- Have is hide display for its respective child
			-->
			<div class="broadcasts" id="broadcasts_and_caskets">
				<div class="broadcasts_title"><span id="broadcasts_rewards">Broadcast Rewards</span></div>
				<div class="bottom_border"></div>
				<div class="loot_display" id="broadcasts_loot"></div>
			</div>
			<div class="general">
				<div class="general_title"><span id="general_rewards">General Rewards</span></div>
				<div class="bottom_border"></div>
				<div class="loot_display" id="general_loot"></div>
			</div>
			<div class="common">
				<div class="common_title"><span id="common_rewards">Common Rewards</span></div>
				<div class="bottom_border"></div>
				<div class="loot_display" id="common_loot"></div>
			</div>
			<div class="rare">
				<div class="rare_title"><span id="rare_rewards">Rare Rewards</span></div>
				<div class="bottom_border"></div>
				<div class="loot_display" id="rare_loot"></div>
			</div>
		</mainsection>
		<footer>
			<div class="footer_bar"></div>
			<div class="copyright">
				&nbsp;&nbsp;Reach out on Discord for questions or inquiries @RedX1000#3655
			</div>
		</footer>
	</body>
</html>